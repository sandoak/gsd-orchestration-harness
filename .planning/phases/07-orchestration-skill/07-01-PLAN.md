---
phase: 07-orchestration-skill
plan: 01
type: execute
---

<objective>
Create the /gsd:orchestrate skill that enables Claude to run GSD workflows in parallel sessions using the harness MCP tools.

Purpose: Complete the harness by providing the user-facing orchestration command that leverages all the infrastructure built in phases 1-6.
Output: Working /gsd:orchestrate skill with documentation for harness-mode GSD execution.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-phase.md
./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase summaries (dependency context):

@.planning/phases/03-mcp-server/03-02-SUMMARY.md
@.planning/phases/05-gsd-integration/05-03-SUMMARY.md
@.planning/phases/06-e2e-integration/06-03-SUMMARY.md

# Existing workflow patterns to follow:

@.claude/get-shit-done/workflows/execute-phase.md
@.claude/get-shit-done/workflows/resume-project.md

# MCP tools available (from harness):

# - gsd_start_session: Start new session in available slot

# - gsd_list_sessions: Get status of all session slots

# - gsd_end_session: Terminate a running session

# - gsd_get_output: Get recent output from a session

# - gsd_get_state: Parse .planning/ and return GSD state

# - gsd_get_checkpoint: Get checkpoint info if session is waiting

# - gsd_respond_checkpoint: Send response to a waiting checkpoint

# Current harness documentation:

@README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create orchestrate.md workflow file</name>
  <files>.claude/get-shit-done/workflows/orchestrate.md</files>
  <action>
Create the /gsd:orchestrate workflow file that teaches Claude how to use the harness MCP tools for parallel session orchestration.

The workflow must include:

1. **Trigger section** - When to use orchestration mode (harness available, parallel work desired)

2. **Purpose section** - Run GSD workflows in parallel sessions with automated coordination

3. **Process with steps:**

   a. **check_harness_available** - Verify harness MCP tools are accessible by calling gsd_list_sessions

   b. **display_session_status** - Show current slot states (idle/running/waiting_checkpoint/completed/failed)

   c. **orchestration_loop** - Main loop that:
   - Lists available slots
   - Assigns work to idle slots (phases/plans based on ROADMAP)
   - Monitors running sessions for checkpoints
   - Surfaces checkpoints that need attention (decision/human-action)
   - Auto-handles human-verify checkpoints where possible
   - Tracks completion and assigns next work

   d. **checkpoint_handling** - When checkpoint detected:
   - For human-verify: Run verification steps, respond with "approved" or issues
   - For decision: Present options to user, wait for choice, relay response
   - For human-action: Alert user, wait for "done", continue

   e. **progress_reporting** - Show overall progress across all sessions

4. **MCP tool usage patterns:**
   - gsd_list_sessions: Get slot overview
   - gsd_start_session(workingDir, command): Assign work - command like "/gsd:execute-plan .planning/phases/XX/YY-ZZ-PLAN.md"
   - gsd_get_output(sessionId, lines): Check recent output for status
   - gsd_get_state(sessionId): Get parsed GSD state from .planning/
   - gsd_get_checkpoint(sessionId): Check if waiting at checkpoint
   - gsd_respond_checkpoint(sessionId, response): Send checkpoint response
   - gsd_end_session(sessionId): Terminate if needed

5. **Coordination logic:**
   - Track which phase/plan each slot is executing
   - Detect when a session completes (status changes to completed)
   - Assign next work from ROADMAP based on dependencies
   - Handle failures gracefully (mark failed, optionally retry)

6. **Success criteria section** - All phases complete, no failed sessions

Follow the existing workflow file patterns from execute-phase.md and resume-project.md for structure and style.
</action>
<verify> - File exists at .claude/get-shit-done/workflows/orchestrate.md - File has valid XML-like structure with trigger, purpose, process sections - All 7 MCP tools are referenced with correct usage - Orchestration loop logic is clear and actionable
</verify>
<done> - orchestrate.md created with complete orchestration workflow - All MCP tool usages documented - Checkpoint handling for all 3 types defined - Progress reporting included
</done>
</task>

<task type="auto">
  <name>Task 2: Update documentation with orchestration usage</name>
  <files>README.md, docs/ARCHITECTURE.md</files>
  <action>
Update project documentation to include orchestration mode:

1. **README.md updates:**
   - Add "Orchestration Mode" section after "Checkpoint Handling"
   - Explain /gsd:orchestrate command usage
   - Show example workflow: how orchestrator assigns work to slots
   - Document the orchestration loop behavior
   - Add link to workflow file for full details

2. **docs/ARCHITECTURE.md updates:**
   - Add "Orchestration Flow" section
   - Document how orchestrator Claude uses MCP tools
   - Show the coordination pattern (monitor → assign → checkpoint → continue)
   - Explain parallel execution strategy

Keep documentation concise and focused on practical usage.
</action>
<verify> - README.md contains "Orchestration Mode" section - docs/ARCHITECTURE.md contains orchestration flow documentation - /gsd:orchestrate command is documented with usage example
</verify>
<done> - README updated with orchestration section - ARCHITECTURE.md updated with orchestration flow - Usage examples provided
</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] orchestrate.md exists and follows GSD workflow patterns
- [ ] All 7 MCP tools referenced correctly in workflow
- [ ] README documents /gsd:orchestrate usage
- [ ] ARCHITECTURE.md documents orchestration flow
- [ ] No TypeScript/build errors introduced
</verification>

<success_criteria>

- orchestrate.md workflow complete with all orchestration logic
- Documentation updated with orchestration mode
- /gsd:orchestrate skill ready for use
- Phase 7 complete - v1.1 with orchestration ready
  </success_criteria>

<output>
After completion, create `.planning/phases/07-orchestration-skill/07-01-SUMMARY.md`:

# Phase 7 Plan 1: Orchestration Skill Workflow Summary

**[Substantive one-liner about what was built]**

## Accomplishments

- [Key outcomes]

## Files Created/Modified

- [Files with descriptions]

## Decisions Made

[Key decisions and rationale]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Phase complete - v1.1 ready with /gsd:orchestrate command
</output>
